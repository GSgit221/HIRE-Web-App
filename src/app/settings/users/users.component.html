<div class="container fixed-width-container">
    <div class="title-block">
        <h1 class="page-title">{{ user && user.first_name ? user.last_name : 'Users'}}</h1>
        <div class="sections-nav">
            <div class="section-nav-link"
                 (click)="onChangeSection('users')"
                 [ngClass]="{'active': activeSection === 'users'}">Users
            </div>
            <div class="section-nav-link"
                 (click)="onChangeSection('pending-invitation')"
                 [ngClass]="{'active': activeSection === 'pending-invitation'}">Pending Invitations
            </div>
        </div>
    </div>
    <div class="section-separator mb20"></div>
    <div class="content-section" id="users" *ngIf="activeSection === 'users'">
        <div class="hc-list">
            <div class="hc-selected-items" *ngIf="selectedItems">
                <div class="text-block">
                    <p>
                        {{selectedItems}} items selected
                    </p>
                </div>
            </div>
            <div class="hc-list-header">
                <div class="col col1 flex-5 hc-checkbox-col">
                    <div class="hc-checkbox profile-check-header-pad-left">
                        <p-checkbox binary="true" [(ngModel)]="selectedAll"
                                    (onChange)="onSelectAllChange()"></p-checkbox>
                    </div>
                </div>
                <div class="col col2 flex-25">Name</div>
                <div class="col col3 flex-25">Email Address</div>
                <div class="col col4 flex-25">Account Type</div>
            </div>
            <div class="nr-list-content">
                <div class="hc-blocker"></div>
                <div class="hc-list-row" *ngFor="let user of userList ; let i = index" (mouseover)="onMouseOver(i)" (mouseout)="onMouseOut(i)" >
                    <div class="hc-list-row-content" (click)="onSelectedRow(i)">
                        <div class="col col1 flex-5 ">
                            <div class="hc-checkbox profile-check-pad-left" data-escape-click>
                                <p-checkbox binary="true" [(ngModel)]="user.selected"
                                            (onChange)="onItemSeletectedChange()" *ngIf="userList[i]?.isVisible "></p-checkbox>
                            </div>
                            <img src="/assets/images/placeholder.png" alt="Profile Icon" *ngIf="!userList[i]?.isVisible && !userList[i].selected">

                        </div>
                        <div class="col col2 flex-25">
                            <p class="hc-content-p">{{user.first_name}} {{user.last_name}}</p>
                        </div>
                        <div class="col col3  flex-25">
                            <p class="hc-content-p">{{user.email}}</p>
                        </div>
                        <div class="col col4 flex-25">{{ user.accountType }}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mb20"></div>
        <form [formGroup]="usersDetailForm">
            <div class="form-content-section">
                <div class="form-content-holder">
                    <div class="form-content-box">
                        <div class="form-block">
                            <label for="" class="form-block-label">Invite a New User</label>
                            <div class="form-block-columns padding-columns">
                                <div class="form-block-col flex-30">
                                    <div class="input-block">
                                        <input type="text" class="form-input pl45" placeholder="Full Name"
                                               formControlName="name">
                                         <div class="error-message" *ngIf="!usersDetailForm.get('name').valid && usersDetailForm.get('name').touched">Full Name is required</div>
                                    </div>
                                </div>
                                <div class="form-block-col flex-30">
                                    <div class="input-block">
                                        <input type="text" class="form-input pl45" placeholder="Email Address"
                                               formControlName="email">
                                        <div class="error-message" *ngIf="!usersDetailForm.get('email').valid && usersDetailForm.get('email').touched">Email is required</div>
                                    </div>
                                </div>
                                <div class="form-block-col flex-25">
                                    <div class="input-block">
                                        <p-dropdown [options]="accountTypeOptions" formControlName="accountType"
                                                    [style]="{'width':'85%'}" placeholder="Account Type"></p-dropdown>
                                    </div>
                                </div>
                                <div class="flex-15">
                                    <button class="btn btn-primary mla btn-add-user-component" (click)="onAdd()" [disabled]="!usersDetailForm.valid">Add User</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="content-section" id="pending-invitation" *ngIf="activeSection === 'pending-invitation'">
        <div class="hc-list">
            <div class="hc-list-header">
                <div class="col col2 flex-25">Name</div>
                <div class="col col3 flex-25">Email Address</div>
                <div class="col col4 flex-45">Invitation Sent</div>
            </div>
            <div class="nr-list-content">
                <div class="hc-blocker"></div>
                <div class="hc-list-row" *ngFor="let user of userList; let i = index">
                    <div class="hc-list-row-content" >
                        <div class="col col2 flex-25">
                            <p class="hc-content-p">{{user.first_name}} {{user.last_name}}</p>
                        </div>
                        <div class="col col3  flex-25">
                            <p class="hc-content-p">{{user.email}}</p>
                        </div>
                        <div class="col col4 flex-40">{{user.invitationSent}}</div>
                        <div class="col col5 flex-5">
                            <img src="/assets/images/email-send.svg" alt="email icon" pTooltip="Resend Invitation">
                        </div>
                        <div class="col col6 flex-5">
                            <img src="/assets/images/trash.svg" alt="Delete icon" pTooltip="Delete User">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-loader *ngIf="contentLoading"></app-loader>